version: '3.8'

services:
  daem0nmcp:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: daem0nmcp
    volumes:
      # Persistent storage for database
      - daem0nmcp-data:/home/daem0nmcp/data
      # Mount user's project read-only for analysis
      - ${PROJECT_PATH:-.}:/workspace:ro
    environment:
      - DAEM0NMCP_PROJECT_ROOT=/workspace
      - DAEM0NMCP_LOG_LEVEL=${LOG_LEVEL:-INFO}
    # Required for MCP stdio transport
    stdin_open: true
    tty: true
    restart: unless-stopped

volumes:
  daem0nmcp-data:
    driver: local
